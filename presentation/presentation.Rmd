---
title: "Exploring Factors of Popularity in U.S. Youtube Videos"
subtitle: "What makes a Youtube video popular?"
author: "CharlieBitMyFinger <br> Jesse Solinger, Oliver Wan, and Riley Burns"
institute: "Bates College"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader: 
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      ratio: "16:9"
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r load-packages, include = FALSE}
# Add any additional packages you need to this chunk
library(tidyverse)
library(tidymodels)
library(palmerpenguins)
library(knitr)
library(xaringanthemer)
library(RColorBrewer)
library(stringr)
library(ggplot2)
library(hrbrthemes)
library(ggspatial)
library(gifski)
library(lubridate)
library(gganimate)
```

```{r setup, include=FALSE}
# For better figure resolution
knitr::opts_chunk$set(fig.retina = 3, dpi = 300, fig.width = 6, fig.asp = 0.618, out.width = "80%")
```

```{r load-data, echo = FALSE, include=FALSE}
# Load your data here
yt <- readr::read_csv(file = "../data/USvideos.csv")

yt$category <- 0

film_animation <- "1"
autos_vehicles <- "2"
music <- "10"
pets_animals <- "15"
sports <- "17"
travel_events <- "19"
gaming <- "20"
people_blogs <- "22"
comedy <- "23"
entertainment <- "24"
news_politics <- "25"
howto_style <- "26"
education <- "27"
science_tech <- "28"
nonprofits_activism <- "29"

for(i in 1:nrow(yt)){
  evaluate_category_id <- yt$category_id[i]
  if(evaluate_category_id %in% film_animation){
    yt$category[i] <- "Film & Animation"
  } else if(evaluate_category_id %in% autos_vehicles){
    yt$category[i] <- "Autos & Vehicles"
  } else if(evaluate_category_id %in% music){
    yt$category[i] <- "Music"
  } else if(evaluate_category_id %in% pets_animals){
    yt$category[i] <- "Pets & Animals"
  } else if(evaluate_category_id %in% sports){
    yt$category[i] <- "Sports"
  } else if(evaluate_category_id %in% travel_events){
    yt$category[i] <- "Travel & Events"
  } else if(evaluate_category_id %in% gaming){
    yt$category[i] <- "Gaming"
  } else if(evaluate_category_id %in% people_blogs){
    yt$category[i] <- "People & Blogs"
  } else if(evaluate_category_id %in% comedy){
    yt$category[i] <- "Comedy"
  } else if(evaluate_category_id %in% entertainment){
    yt$category[i] <- "Entertainment"
  } else if(evaluate_category_id %in% news_politics){
    yt$category[i] <- "News & Politics"
  } else if(evaluate_category_id %in% howto_style){
    yt$category[i] <- "Howto & Style"
  } else if(evaluate_category_id %in% education){
    yt$category[i] <- "Education"
  } else if(evaluate_category_id %in% science_tech){
    yt$category[i] <- "Science & Technology"
  } else if(evaluate_category_id %in% nonprofits_activism){
    yt$category[i] <- "Nonprofits & Activism"
  }else {
    yt$category[i] <- "Other"
  }}
```

```{r, echo = FALSE}
style_xaringan(
  title_slide_background_image = "img/3ebb12890a8a5405b80a9f63e268b1aa.jpg"
)
```


class: left, middle

## Research Question

What makes a Youtube video popular? And what factors contribute to videos' popularity? 

Youtube maintains a list of top trending videos posted on their platform each year. According to Variety magazine, Youtube does not base their top trending video list solely on views. They measure user interactions (number of views, shares, comments and likes), which all impact video popularity. 

Keeping this in mind, we will explore what specific factors contribute to popularity and maybe how we can predict a video's eventual popularity.

---

class: left, top

# Trending Youtube Video Statistics

We aim to examine what makes a Youtube video popular using a dataset from Kaggle.com, containing a daily record of the top trending Youtube videos and their statistics. The dataset includes the video title, channel title, publish time, tags, views, likes and dislikes, description, and comment count. The data also contains data from 10 different countries, but for the purpose of this project, we will stick to data from the U.S. It's also important to note that this dataset uses Youtube data from 2017 to 2018.

```{r, out.width='35%', fig.align='center', fig.cap = "url(https://www.wired.co.uk/article/youtube-migration-videos)", echo = FALSE}
knitr::include_graphics("img/wired-youtube.jpg.webp")
```

---

# How Do Likes Impact Views?

.pull-left[
```{r likes-views, echo = FALSE, message = FALSE, out.width = "100%"}
ggplot(data = yt, mapping = aes(x = likes, y = views, color = category)) +
  geom_point(size = 0.5, alpha = 0.5) + 
  theme(legend.title = element_text(size=18),
        legend.text = element_text(size=14)) +
  guides(color = guide_legend(override.aes = list(size = 4))) +
  labs( "Views vs. Likes", x="Likes", y="Views", color = "Category") + 
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_x_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_colour_viridis_d()
```
]

.pull-right[
```{r likes-views-faceted, echo=FALSE, message=FALSE, out.width= "100%"}
ggplot(data = yt, mapping = aes(x = likes, y = views, color = category), alpha = 0.1) +
  geom_point(alpha = 0.5) + 
  theme(legend.title = element_text(size=18),
        legend.text = element_text(size=14)) +
  guides(color = guide_legend(override.aes = list(size = 4))) +
  labs( "Views vs. Likes", x="Likes", y="Views", color = "Category") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  facet_wrap(~category) +
  scale_x_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_colour_viridis_d()
```
]

---

# How Do Dislikes Impact Views?

.pull-left[
```{r dislikes-views, echo=FALSE, message=FALSE, out.width= "100%"}
#views v dislikes all w line of fit
ggplot(data = yt, mapping = aes(x = dislikes, y = views, color = category)) +
  geom_point(size = 0.5, alpha = 0.5) +
  theme(legend.title = element_text(size=18),
        legend.text = element_text(size=14)) +
  guides(color = guide_legend(override.aes = list(size = 4))) +
  labs( "Views vs. Dislikes", x="Dislikes", y="Views", color = "Category") + 
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_x_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_colour_viridis_d()
```
]

.pull-right[
```{r dislikes-views-faceted, echo=FALSE, message=FALSE, out.width= "100%"}
#views v dislikes faceted w lines of fit
ggplot(data = yt, mapping = aes(x = dislikes, y = views, color = category), alpha = 0.1) +
  geom_point(alpha = 0.5) + 
  theme(legend.title = element_text(size=18),
        legend.text = element_text(size=14)) +
  guides(color = guide_legend(override.aes = list(size = 4))) +
  labs( "Views vs. Dislikes", x="Dislikes", y="Views", color = "Category") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  geom_smooth(method = "lm", se = FALSE, color = "red") + 
  facet_wrap(~category) +
  scale_x_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  scale_colour_viridis_d()
```
]

---

# How Does Time Impact Views? (Date Published)
.pull-left[
```{r views vs date published, echo=FALSE, message=FALSE, warning=FALSE, out.width= "100%"}
yt$publish_date <- as.Date(yt$publish_time)

yt %>%
  ggplot(data = yt, mapping = aes(x = publish_date, y = views, color = category)) +
  geom_point(size = 0.5, alpha = 0.5) +
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  labs(
    title = "The Relationship Between YouTube Views and Date",
    subtitle = "by Category",
    x = "Date Published",
    y = "Views",
    color = "Category") +
  theme(legend.title = element_text(size = 10), 
        legend.text = element_text(size = 8),
        legend.key.size = unit(0.4, "cm"), 
        axis.text.x=element_text(angle=60, hjust=1)) +
  scale_x_date(limit=c(as.Date("2016-12-15 18:59:30 UTC"), as.Date("2018-6-30 18:59:30 UTC")), date_breaks = "1 month", date_labels = "%y-%m") +
  scale_colour_viridis_d()
```
]

.pull-right[
```{r views vs date published facet, echo=FALSE, message=FALSE, warning=FALSE, out.width= "100%"}
yt %>%
  ggplot(data = yt, mapping = aes(x = publish_date, y = views, color = category)) +
  geom_point(alpha = 0.5) +
  labs(
    title = "The Relationship Between YouTube Views and Date",
    subtitle = "by Category",
    x = "Date Published",
    y = "Views",
    color = "Category") +
  theme(legend.title = element_text(size = 10), 
        legend.text = element_text(size = 8),
        legend.key.size = unit(0.4, "cm"), 
        axis.text.x=element_text(angle=60, hjust=1)) +
  scale_x_date(limit=c(as.Date("2017-10-15 18:59:30 UTC"), as.Date("2018-6-30 18:59:30 UTC")), date_breaks = "1 month", date_labels = "%y-%m") +
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6)) +
  facet_wrap(~category) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  scale_colour_viridis_d()
```
]

---

#How Does Time Impact Views (Months and Minutes)

.pull-left[
```{r views vs month,echo=FALSE, message=FALSE, warning=FALSE, out.width= "100%"}
ggplot(data = yt, mapping = aes(x = month(publish_time, label = TRUE), y = views)) +
  geom_point(size = 0.5) + 
  coord_polar() + 
  labs(title = "Views and Upload Time (Month)", x="Month", y="Views") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6))
```
]
.pull-right[
```{r views vs hour, echo=FALSE, message=FALSE, out.width= "100%"}
ggplot(data = yt, mapping = aes(x = hour(publish_time), y = views)) + 
  geom_point(size = 0.5) + 
  coord_polar() + 
  labs(title = "Views and Upload Time(Hour)", x="Hour", y="Views") + 
  scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6))
```
]

---

# How Many Videos are Produced Within Each Category?

```{r category-videos, echo=FALSE, message=FALSE, fig.align='center', out.width= "70%"}
videos_per_category = yt %>%
    group_by(category) %>%
    count %>%
    arrange(desc(n))

ggplot(videos_per_category, aes(x=reorder(category, n), y=n)) + 
  geom_bar(stat = "identity") +
  labs(title = "Number of Videos In Each Category", x="Category", y="# of Videos") +
   theme(axis.text.x=element_text(angle=60, hjust=1), legend.position= 'none')
```

---

# What is the Relationship Between Views and Category?

```{r category-v-views, echo=FALSE, message=FALSE, fig.align='center', out.width= "70%"}
yt %>%
  ggplot(data = yt, mapping = aes(x = category, y = views)) +
  geom_boxplot(alpha = 0.15, aes(color = factor(yt$category))) +
  labs(
    title = "Relationship Between YouTube Category and Views",
    x = "Category",
    y = "Views",
    color = "Category") +
  theme(axis.text.x=element_text(angle=60, hjust=1), legend.position= 'none' ) +
  scale_colour_viridis_d() + 
  ylim(0, 235000000) + scale_y_continuous(labels = label_number(suffix = " M", scale = 1e-6))
```

---

## Plot and text

.pull-left[
- Some text
- goes here
]
.pull-right[
```{r warning=FALSE, out.width="100%", fig.width=4, echo=FALSE}
# see how I changed out.width and fig.width from defaults
# to make the figure bigger
ggplot(penguins, aes(x = bill_length_mm, y = species, color = species)) +
  geom_boxplot() +
  theme_minimal()
```
]

---

# Images

```{r castle, echo = FALSE, out.width = "60%", fig.align = "center", fig.cap = "Image credit: Photo by Jörg Angeli on Unsplash."}
include_graphics("https://images.unsplash.com/photo-1535448033526-c0e85c9e6968?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1650&q=80")
```

Or you can also include a full page image. See next slide.

---

background-image: url(https://images.unsplash.com/photo-1535448033526-c0e85c9e6968?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1650&q=80)

---

Limitations:

1. The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

1. There should not be spaces after the opening `$` or before the closing `$`.

1. Math does not work on the title slide (see [#61](https://github.com/yihui/xaringan/issues/61) for a workaround).

---
